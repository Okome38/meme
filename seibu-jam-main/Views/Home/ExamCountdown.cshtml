@{
    ViewData["Title"] = "è©¦é¨“ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³";
}

<div class="container">
    <div class="text-center mb-4">
        <h1 class="display-4">ğŸ’€ è©¦é¨“ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ âš¡</h1>
        <p class="lead text-danger">æ¬¡ã®ä¸­é–“è©¦é¨“ãƒ»æœŸæœ«è©¦é¨“ã¾ã§ã‚ã¨ä½•æ—¥ï¼Ÿ</p>
    </div>

    <!-- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div class="countdown-container">
        <div class="card exam-card">
            <div class="card-header text-center">
                <h2 id="examTitle" class="exam-title">è©¦é¨“æƒ…å ±ã‚’å–å¾—ä¸­...</h2>
            </div>
            <div class="card-body text-center">
                <div class="countdown-display">
                    <div class="days-container">
                        <span id="daysCount" class="days-number">--</span>
                        <span class="days-label">æ—¥</span>
                        <div class="skull-decoration">ğŸ’€</div>
                    </div>
                    <div class="countdown-text">
                        <p id="countdownMessage" class="message">è¨ˆç®—ä¸­...</p>
                        <p id="examDate" class="exam-date"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ä»Šå¾Œã®è©¦é¨“äºˆå®šä¸€è¦§ -->
    <div class="upcoming-exams mt-5">
        <h3 class="text-center mb-4">âš ï¸ ä»Šå¾Œã®è©¦é¨“äºˆå®š âš ï¸</h3>
        <div id="examList" class="exam-list">
            <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
        </div>
    </div>

    <!-- ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <div class="text-center mt-4">
        <a href="@Url.Action("Index", "Home")" class="btn btn-secondary btn-lg">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
    </div>
</div>

<style>
@@import url('https://fonts.googleapis.com/css2?family=Creepster&display=swap');

body {
    background: linear-gradient(45deg, #1a1a2e, #16213e, #0f3460);
    min-height: 100vh;
    color: #fff;
}

.countdown-container {
    max-width: 600px;
    margin: 0 auto;
}

.exam-card {
    border: 3px solid #ff0000;
    box-shadow: 0 10px 30px rgba(255,0,0,0.3), 0 0 50px rgba(255,0,0,0.1);
    border-radius: 20px;
    overflow: hidden;
    background: linear-gradient(135deg, #2d1b69 0%, #11052c 50%, #3c0000 100%);
    color: #fff;
    position: relative;
    animation: pulseRed 2s infinite;
}

@@keyframes pulseRed {
    0%, 100% { box-shadow: 0 10px 30px rgba(255,0,0,0.3), 0 0 50px rgba(255,0,0,0.1); }
    50% { box-shadow: 0 15px 40px rgba(255,0,0,0.5), 0 0 80px rgba(255,0,0,0.2); }
}

.exam-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255,0,0,0.1) 50%, transparent 70%);
    animation: lightning 3s infinite;
}

@@keyframes lightning {
    0%, 90%, 100% { opacity: 0; }
    95% { opacity: 1; }
}

.exam-card .card-header {
    background: transparent;
    border: none;
    padding: 2rem 1.5rem 1rem;
    position: relative;
}

.exam-title {
    font-family: 'Creepster', cursive;
    font-size: 2rem;
    font-weight: bold;
    margin: 0;
    text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000;
    animation: textFlicker 1.5s infinite alternate;
}

@@keyframes textFlicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.countdown-display {
    padding: 2rem 1rem;
}

.days-container {
    position: relative;
    background: radial-gradient(circle, rgba(139,0,0,0.8) 0%, rgba(0,0,0,0.9) 100%);
    border-radius: 50%;
    width: 200px;
    height: 200px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 0 auto 2rem;
    border: 4px solid #ff0000;
    backdrop-filter: blur(10px);
    box-shadow: inset 0 0 30px rgba(255,0,0,0.3), 0 0 50px rgba(255,0,0,0.2);
    animation: rotateAndPulse 4s infinite;
}

@@keyframes rotateAndPulse {
    0%, 100% { 
        transform: rotate(0deg) scale(1);
        border-color: #ff0000;
    }
    25% { 
        transform: rotate(5deg) scale(1.05);
        border-color: #ff6666;
    }
    50% { 
        transform: rotate(0deg) scale(1.1);
        border-color: #ff0000;
    }
    75% { 
        transform: rotate(-5deg) scale(1.05);
        border-color: #cc0000;
    }
}

.skull-decoration {
    position: absolute;
    font-size: 2rem;
    top: -15px;
    right: -15px;
    animation: float 2s ease-in-out infinite;
}

@@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.days-number {
    font-family: 'Creepster', cursive;
    font-size: 4rem;
    font-weight: bold;
    line-height: 1;
    text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000;
    color: #fff;
    animation: numberGlow 1s infinite alternate;
}

@@keyframes numberGlow {
    0% { text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000; }
    100% { text-shadow: 0 0 20px #ff0000, 0 0 30px #ff0000, 0 0 40px #ff0000; }
}

.days-label {
    font-size: 1.5rem;
    font-weight: 500;
    margin-top: 0.5rem;
    color: #ffcccc;
}

.countdown-text {
    margin-top: 1rem;
}

.message {
    font-size: 1.3rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 5px #ff0000;
    color: #ffcccc;
}

.exam-date {
    font-size: 1.1rem;
    opacity: 0.9;
    margin: 0;
    color: #ffdddd;
}

.exam-list {
    display: grid;
    gap: 1rem;
    max-width: 800px;
    margin: 0 auto;
}

.exam-item {
    background: linear-gradient(135deg, #1a1a2e 0%, #2d1b69 100%);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 4px 15px rgba(255,0,0,0.2);
    border: 2px solid #ff4444;
    transition: all 0.3s ease;
    color: #fff;
}

.exam-item:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 25px rgba(255,0,0,0.4);
    border-color: #ff0000;
}

.exam-item-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #ffcccc;
    margin-bottom: 0.5rem;
    text-shadow: 0 0 5px #ff0000;
}

.exam-item-date {
    color: #cccccc;
    font-size: 1rem;
}

.exam-item-days {
    color: #ff6666;
    font-weight: bold;
    font-size: 1.1rem;
    margin-top: 0.5rem;
    text-shadow: 0 0 5px #ff0000;
}

.display-4 {
    font-family: 'Creepster', cursive;
    background: linear-gradient(45deg, #ff0000, #ff6666, #cc0000);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: bold;
    text-shadow: 0 0 20px #ff0000;
    animation: titleShake 0.5s infinite;
}

@@keyframes titleShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
}

.text-danger {
    color: #ff6666 !important;
    text-shadow: 0 0 10px #ff0000;
}

.btn-secondary {
    background: linear-gradient(45deg, #6c757d, #495057);
    border: 2px solid #ff4444;
    border-radius: 25px;
    padding: 12px 30px;
    font-weight: bold;
    transition: all 0.3s ease;
    color: #fff;
}

.btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255,0,0,0.3);
    border-color: #ff0000;
    background: linear-gradient(45deg, #8b0000, #654321);
}

.alert-info {
    background: linear-gradient(45deg, #2d1b69, #1a1a2e);
    border: 2px solid #ff4444;
    border-radius: 12px;
    color: #ffcccc;
}

/* æ€–ã„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¿½åŠ  */
.countdown-container::before {
    content: '';
    position: absolute;
    top: -50px;
    left: -50px;
    right: -50px;
    bottom: -50px;
    background: radial-gradient(circle, transparent 70%, rgba(255,0,0,0.1) 100%);
    z-index: -1;
    animation: aura 3s infinite;
}

@@keyframes aura {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.7; }
}

@@media (max-width: 768px) {
    .days-container {
        width: 150px;
        height: 150px;
    }
    
    .days-number {
        font-size: 3rem;
    }
    
    .days-label {
        font-size: 1.2rem;
    }
    
    .exam-title {
        font-size: 1.5rem;
    }
    
    .message {
        font-size: 1.1rem;
    }
    
    .skull-decoration {
        font-size: 1.5rem;
        top: -10px;
        right: -10px;
    }
}
</style>

<script>
// å¹´é–“è¡Œäº‹äºˆå®šãƒ‡ãƒ¼ã‚¿ï¼ˆSchedule.cshtmlã‹ã‚‰æŠ½å‡ºï¼‰
const scheduleData = [
    // 4æœˆ
    { start: "4/1", end: "4/5", title: "æ˜¥å­£ä¼‘æ¥­" },
    { start: "4/3", end: "4/3", title: "é–‹å¯®ãƒ»å…¥å¯®å¼ãƒ»æ–°å…¥å¯®ç”Ÿã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" },
    { start: "4/4", end: "4/4", title: "å…¥å­¦å¼ãƒ»æ–°å…¥ç”Ÿã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" },
    { start: "4/7", end: "4/7", title: "ä¸€æ–‰å¥åº·è¨ºæ–­ãƒ»å°‚æ”»ç§‘ã‚ªãƒªã‚¨ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³" },
    { start: "4/8", end: "4/8", title: "å‰æœŸæˆæ¥­é–‹å§‹" },
    { start: "4/16", end: "4/16", title: "æ–°å…¥ç”Ÿæ­“è¿ä¼šãƒ»ã‚¯ãƒ©ãƒ–ç´¹ä»‹" },
    { start: "4/24", end: "4/24", title: "é–‹æ ¡è¨˜å¿µæ—¥" },
    { start: "4/29", end: "4/29", title: "æ˜­å’Œã®æ—¥" },
    
    // 5æœˆ
    { start: "5/3", end: "5/3", title: "æ†²æ³•è¨˜å¿µæ—¥" },
    { start: "5/4", end: "5/4", title: "ã¿ã©ã‚Šã®æ—¥" },
    { start: "5/5", end: "5/5", title: "ã“ã©ã‚‚ã®æ—¥" },
    { start: "5/7", end: "5/7", title: "æ ¡é•·è¨“è¾ãƒ»æ ¡é•·è¡¨å½°ãƒ»å­¦ç”Ÿç·ä¼š" },
    { start: "5/10", end: "5/10", title: "ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ã‚¦ã‚©ãƒ¼ã‚¯" },
    { start: "5/12", end: "5/16", title: "ã„ã˜ã‚é˜²æ­¢é€±é–“" },
    { start: "5/26", end: "5/31", title: "å‰æœŸä¸­é–“å­¦åŠ›ç¢ºèªé€±é–“" },
    
    // 6æœˆ
    { start: "6/4", end: "6/4", title: "çƒæŠ€å¤§ä¼š" },
    { start: "6/16", end: "6/20", title: "å‰æœŸå…¬é–‹æˆæ¥­é€±é–“" },
    { start: "6/21", end: "6/21", title: "å°‚æ”»ç§‘å…¥å­¦è€…é¸æŠœï¼ˆå­¦åŠ›é¸æŠœï¼‰" },
    { start: "6/22", end: "6/22", title: "åŒ—é™¸åœ°åŒºé«˜å°‚ä½“è‚²å¤§ä¼šï¼ˆé‡çƒï¼‰" },
    { start: "6/28", end: "6/29", title: "åŒ—é™¸åœ°åŒºé«˜å°‚ä½“è‚²å¤§ä¼šï¼ˆå„ç¨®ç«¶æŠ€ï¼‰" },
    
    // 7æœˆ
    { start: "7/1", end: "7/2", title: "æœ¬ç§‘ãƒ»å°‚æ”»ç§‘æœŸæœ«è©¦é¨“" },
    { start: "7/4", end: "7/5", title: "æœ¬ç§‘ãƒ»å°‚æ”»ç§‘æœŸæœ«è©¦é¨“" },
    { start: "7/5", end: "7/5", title: "ç·¨å…¥å­¦è©¦é¨“" },
    { start: "7/6", end: "7/8", title: "è©¦é¨“è¿”å´æ—¥" },
    { start: "7/12", end: "7/12", title: "å¤å­£ä¼‘æ¥­é–‹å§‹" },
    { start: "7/19", end: "7/21", title: "åŒ—ä¿¡è¶Šåœ°åŒºé«˜å°‚ã‚µãƒƒã‚«ãƒ¼" },
    
    // 8æœˆ
    { start: "8/11", end: "8/11", title: "å±±ã®æ—¥" },
    { start: "8/1", end: "8/31", title: "å¤å­£ä¼‘æ¥­ç¶™ç¶š" },
    
    // 9æœˆ
    { start: "9/15", end: "9/15", title: "æ•¬è€ã®æ—¥ãƒ»é–‹å¯®" },
    { start: "9/16", end: "9/19", title: "å­¦åŠ›å¼·åŒ–æœŸé–“" },
    { start: "9/20", end: "9/20", title: "ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹ãƒ„ã‚¢ãƒ¼" },
    { start: "9/23", end: "9/23", title: "ç§‹åˆ†ã®æ—¥" },
    { start: "9/25", end: "9/25", title: "ä½“è‚²ç¥­" },
    { start: "9/29", end: "9/29", title: "å¾ŒæœŸæˆæ¥­é–‹å§‹" },
    
    // 10æœˆ
    { start: "10/1", end: "10/1", title: "é˜²ç½è¨“ç·´" },
    { start: "10/4", end: "10/4", title: "å°‚æ”»ç§‘ãƒ»å¤§å­¦ãƒ»å¤§å­¦é™¢åˆåŒèª¬æ˜ä¼š" },
    { start: "10/5", end: "10/5", title: "é«˜å°‚ãƒ­ãƒœãƒƒãƒˆã‚³ãƒ³ãƒ†ã‚¹ãƒˆæ±æµ·åŒ—é™¸åœ°åŒºå¤§ä¼š" },
    { start: "10/8", end: "10/8", title: "60å‘¨å¹´è¨˜å¿µå¼å…¸" },
    { start: "10/11", end: "10/12", title: "å…¨å›½é«˜å°‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚³ãƒ³ãƒ†ã‚¹ãƒˆ" },
    { start: "10/17", end: "10/19", title: "é«˜å°‚ç¥­" },
    
    // 11æœˆ
    { start: "11/3", end: "11/3", title: "æ–‡åŒ–ã®æ—¥" },
    { start: "11/8", end: "11/9", title: "å…¨å›½é«˜å°‚ãƒ‡ã‚¶ã‚¤ãƒ³ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³" },
    { start: "11/10", end: "11/14", title: "èª­æ›¸é€±é–“" },
    { start: "11/16", end: "11/16", title: "å…¨å›½é«˜å°‚ãƒ­ãƒœãƒƒãƒˆã‚³ãƒ³ãƒ†ã‚¹ãƒˆ" },
    { start: "11/23", end: "11/23", title: "å‹¤åŠ´æ„Ÿè¬ã®æ—¥" },
    { start: "11/26", end: "11/28", title: "å¾ŒæœŸä¸­é–“å­¦åŠ›ç¢ºèªé€±é–“" },
    
    // 12æœˆ
    { start: "12/1", end: "12/3", title: "å¾ŒæœŸä¸­é–“å­¦åŠ›ç¢ºèªé€±é–“" },
    { start: "12/6", end: "12/6", title: "ã‚­ãƒ£ãƒªã‚¢æ•™è‚²ã‚»ãƒŸãƒŠãƒ¼" },
    { start: "12/11", end: "12/17", title: "å¾ŒæœŸå…¬é–‹æˆæ¥­é€±é–“" },
    { start: "12/25", end: "12/25", title: "å†¬å­£ä¼‘æ¥­é–‹å§‹ãƒ»é–‰å¯®" },
    
    // 1æœˆ
    { start: "1/1", end: "1/1", title: "å…ƒæ—¥" },
    { start: "1/7", end: "1/7", title: "é–‹å¯®" },
    { start: "1/8", end: "1/8", title: "æˆæ¥­å†é–‹" },
    { start: "1/10", end: "1/10", title: "å…¥å­¦è€…é¸æŠœï¼ˆæ¨è–¦é¸æŠœï¼‰" },
    { start: "1/13", end: "1/13", title: "æˆäººã®æ—¥" },
    { start: "1/21", end: "1/21", title: "æ ¡é•·è¡¨å½°ãƒ»æ ¡é•·è¨“è¾ãƒ»å­¦ç”Ÿç·ä¼š" },
    
    // 2æœˆ
    { start: "2/2", end: "2/2", title: "æœ¬ç§‘ï¼•å¹´å’æ¥­ç ”ç©¶ç™ºè¡¨" },
    { start: "2/8", end: "2/8", title: "å…¥å­¦è€…é¸æŠœï¼ˆå­¦åŠ›é¸æŠœï¼‰" },
    { start: "2/11", end: "2/11", title: "å»ºå›½è¨˜å¿µã®æ—¥" },
    { start: "2/12", end: "2/18", title: "æœ¬ç§‘ãƒ»å°‚æ”»ç§‘æœŸæœ«è©¦é¨“" },
    { start: "2/23", end: "2/23", title: "å¤©çš‡èª•ç”Ÿæ—¥" },
    { start: "2/28", end: "2/29", title: "å°‚æ”»ç§‘ç‰¹åˆ¥ç ”ç©¶ç™ºè¡¨ä¼š" },
    
    // 3æœˆ
    { start: "3/3", end: "3/3", title: "ç¬¬3ãƒ–ãƒ­ãƒƒã‚¯å°‚æ”»ç§‘ç ”ç©¶ãƒ•ã‚©ãƒ¼ãƒ©ãƒ " },
    { start: "3/18", end: "3/18", title: "å’æ¥­ãƒ»ä¿®äº†å¼" },
    { start: "3/19", end: "3/19", title: "å­¦å¹´æœ«ä¼‘æ¥­é–‹å§‹" },
    { start: "3/20", end: "3/20", title: "æ˜¥åˆ†ã®æ—¥" }
];

// æ—¥æœ¬æ™‚é–“ã‚’å–å¾—ã™ã‚‹é–¢æ•°
function getJapanTime() {
    const now = new Date();
    // æ—¥æœ¬æ™‚é–“ï¼ˆUTC+9ï¼‰ã«å¤‰æ›
    const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
    const japanTime = new Date(utc + (9 * 3600000));
    japanTime.setHours(0, 0, 0, 0); // æ™‚åˆ»ã‚’00:00:00ã«è¨­å®š
    return japanTime;
}

// æ—¥ä»˜æ–‡å­—åˆ—ã‚’Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã™ã‚‹é–¢æ•°ï¼ˆå¹´åº¦è€ƒæ…®ï¼‰
function parseScheduleDate(dateStr) {
    const [month, day] = dateStr.split('/').map(Number);
    const japanTime = getJapanTime();
    const currentYear = japanTime.getFullYear();
    
    // 4æœˆä»¥é™ã¯ä»Šå¹´åº¦ã€1-3æœˆã¯æ¬¡å¹´åº¦ã¨ã—ã¦æ‰±ã†
    const year = month >= 4 ? currentYear : currentYear + 1;
    
    return new Date(year, month - 1, day);
}

// è©¦é¨“é–¢é€£ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æŠ½å‡º
function getExamEvents() {
    return scheduleData.filter(event => 
        event.title.includes('ä¸­é–“') || 
        event.title.includes('æœŸæœ«è©¦é¨“') ||
        event.title.includes('å­¦åŠ›ç¢ºèªé€±é–“')
    );
}

// æ¬¡ã®è©¦é¨“ã‚’è¦‹ã¤ã‘ã‚‹
function findNextExam() {
    const today = getJapanTime();
    
    const examEvents = getExamEvents();
    const upcomingExams = [];
    
    examEvents.forEach(event => {
        const startDate = parseScheduleDate(event.start);
        const endDate = parseScheduleDate(event.end);
        
        // è©¦é¨“æœŸé–“ã®é–‹å§‹æ—¥ãŒä»Šæ—¥ä»¥é™ã®å ´åˆã®ã¿
        if (startDate >= today) {
            const daysUntil = Math.ceil((startDate - today) / (1000 * 60 * 60 * 24));
            upcomingExams.push({
                ...event,
                startDate: startDate,
                endDate: endDate,
                daysUntil: daysUntil
            });
        }
    });
    
    // æ—¥æ•°ã§ã‚½ãƒ¼ãƒˆ
    upcomingExams.sort((a, b) => a.daysUntil - b.daysUntil);
    
    return upcomingExams;
}

// æ—¥ä»˜ã‚’è¡¨ç¤ºç”¨ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
function formatDate(date) {
    return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥`;
}

// æœŸé–“ã‚’è¡¨ç¤ºç”¨ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
function formatDateRange(startDate, endDate) {
    if (startDate.getTime() === endDate.getTime()) {
        return formatDate(startDate);
    } else {
        return `${formatDate(startDate)} ï½ ${formatDate(endDate)}`;
    }
}

// UIã‚’æ›´æ–°
function updateCountdown() {
    const upcomingExams = findNextExam();
    
    if (upcomingExams.length === 0) {
        document.getElementById('examTitle').textContent = 'ğŸ’€ ä»Šå¹´åº¦ã®è©¦é¨“ã¯çµ‚äº†ã—ã¾ã—ãŸ ğŸ’€';
        document.getElementById('daysCount').textContent = 'ğŸ‰';
        document.getElementById('countdownMessage').textContent = 'ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼';
        document.getElementById('examDate').textContent = '';
        return;
    }
    
    const nextExam = upcomingExams[0];
    
    document.getElementById('examTitle').textContent = `ğŸ’€ ${nextExam.title} ğŸ’€`;
    document.getElementById('daysCount').textContent = nextExam.daysUntil;
    
    if (nextExam.daysUntil === 0) {
        document.getElementById('countdownMessage').textContent = 'âš¡ ä»Šæ—¥ã‹ã‚‰è©¦é¨“ã§ã™ï¼ âš¡';
    } else if (nextExam.daysUntil === 1) {
        document.getElementById('countdownMessage').textContent = 'âš ï¸ æ˜æ—¥ã‹ã‚‰è©¦é¨“ã§ã™ï¼ âš ï¸';
    } else {
        document.getElementById('countdownMessage').textContent = 'âš¡ æ®‹ã‚Šæ™‚é–“ âš¡';
    }
    
    document.getElementById('examDate').textContent = formatDateRange(nextExam.startDate, nextExam.endDate);
    
    // ä»Šå¾Œã®è©¦é¨“ä¸€è¦§ã‚’æ›´æ–°
    updateExamList(upcomingExams);
}

// è©¦é¨“ä¸€è¦§ã‚’æ›´æ–°
function updateExamList(upcomingExams) {
    const examListElement = document.getElementById('examList');
    
    if (upcomingExams.length <= 1) {
        examListElement.innerHTML = '<div class="alert alert-info text-center">ğŸ’€ ä»–ã®äºˆå®šã•ã‚Œã¦ã„ã‚‹è©¦é¨“ã¯ã‚ã‚Šã¾ã›ã‚“ ğŸ’€</div>';
        return;
    }
    
    let html = '';
    // æœ€åˆã®è©¦é¨“ï¼ˆãƒ¡ã‚¤ãƒ³ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ï¼‰ä»¥å¤–ã‚’è¡¨ç¤º
    for (let i = 1; i < upcomingExams.length && i < 6; i++) {
        const exam = upcomingExams[i];
        html += `
            <div class="exam-item">
                <div class="exam-item-title">ğŸ’€ ${exam.title}</div>
                <div class="exam-item-date">${formatDateRange(exam.startDate, exam.endDate)}</div>
                <div class="exam-item-days">âš¡ ã‚ã¨ ${exam.daysUntil} æ—¥ âš¡</div>
            </div>
        `;
    }
    
    examListElement.innerHTML = html;
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
document.addEventListener('DOMContentLoaded', function() {
    updateCountdown();
    
    // 1æ™‚é–“ã”ã¨ã«æ›´æ–°ï¼ˆã‚ˆã‚Šé »ç¹ã«æ—¥æœ¬æ™‚é–“ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
    setInterval(updateCountdown, 60 * 60 * 1000);
});
</script>
